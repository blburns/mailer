# Postfix Manager VM Environment Configuration
# This file is safe to sync to VM and contains VM-specific settings
# Copy this to .env.vm on the VM and modify as needed

# Flask Configuration
FLASK_APP=run.py
FLASK_ENV=production
SECRET_KEY=vm-secret-key-change-in-production

# Database Configuration
# Choose one of the following database types: sqlite, mysql, mariadb, postgresql
DB_TYPE=postgresql

# PostgreSQL Configuration (recommended for VM/production)
DB_HOSTNAME=localhost
DB_PORT=5432
DB_USERNAME=postfix_manager
DB_PASSWORD=postfix_manager
DB_NAME=postfix_manager

# Database Connection Pool Settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30

# SQLAlchemy Configuration
SQLALCHEMY_TRACK_MODIFICATIONS=false
SQLALCHEMY_ECHO=false

# Mail Server Configuration
POSTFIX_CONFIG_DIR=/etc/postfix
DOVECOT_CONFIG_DIR=/etc/dovecot
LDAP_CONFIG_DIR=/etc/ldap
VMAIL_HOME=/home/vmail

# LDAP Configuration
LDAP_SERVER_URI=ldap://localhost:389
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=your_ldap_password
LDAP_BASE_DN=dc=example,dc=com

# Rate Limiting
RATELIMIT_ENABLED=true
RATELIMIT_STORAGE_URL=memory://
RATELIMIT_DEFAULT=100 per day;20 per hour;1 per second
FLASK_LIMITER_ENABLED=true

# Logging
LOG_LEVEL=INFO
LOG_FILE=/var/log/postfix-manager/app.log

# Production Settings
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict
